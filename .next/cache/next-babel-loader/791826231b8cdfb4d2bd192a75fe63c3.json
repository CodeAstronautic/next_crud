{"ast":null,"code":"import Employee from \"@/models/Employee\";\nimport \"@/utils/dbConnect\";\nexport default (async (req, res) => {\n  const {\n    method\n  } = req;\n\n  switch (method) {\n    case \"GET\":\n      try {\n        const employees = await Employee.find({}).sort({\n          createdAt: \"desc\"\n        });\n        return res.status(200).json({\n          success: true,\n          data: employees\n        });\n      } catch (error) {\n        return res.status(400).json({\n          success: false\n        });\n      }\n\n    case \"POST\":\n      try {\n        const employees = await Employee.create(req.body);\n        return res.status(201).json({\n          success: true,\n          data: employees\n        });\n      } catch (error) {\n        return res.status(400).json({\n          success: false\n        });\n      }\n\n    default:\n      res.setHeaders(\"Allow\", [\"GET\", \"POST\"]);\n      return res.status(405).json({\n        success: false\n      }).end(`Method ${method} Not Allowed`);\n  }\n});","map":{"version":3,"sources":["/home/globalia/Downloads/next-crud-master/pages/api/employees/index.js"],"names":["Employee","req","res","method","employees","find","sort","createdAt","status","json","success","data","error","create","body","setHeaders","end"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,mBAArB;AACA,OAAO,mBAAP;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,QAAM;AAAEC,IAAAA;AAAF,MAAaF,GAAnB;;AAEA,UAAQE,MAAR;AACC,SAAK,KAAL;AACC,UAAI;AACH,cAAMC,SAAS,GAAG,MAAMJ,QAAQ,CAACK,IAAT,CAAc,EAAd,EAAkBC,IAAlB,CAAuB;AAC9CC,UAAAA,SAAS,EAAE;AADmC,SAAvB,CAAxB;AAIA,eAAOL,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BC,UAAAA,OAAO,EAAE,IADkB;AAE3BC,UAAAA,IAAI,EAAEP;AAFqB,SAArB,CAAP;AAIA,OATD,CASE,OAAOQ,KAAP,EAAc;AACf,eAAOV,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BC,UAAAA,OAAO,EAAE;AADkB,SAArB,CAAP;AAGA;;AACF,SAAK,MAAL;AACC,UAAI;AACH,cAAMN,SAAS,GAAG,MAAMJ,QAAQ,CAACa,MAAT,CAAgBZ,GAAG,CAACa,IAApB,CAAxB;AACA,eAAOZ,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BC,UAAAA,OAAO,EAAE,IADkB;AAE3BC,UAAAA,IAAI,EAAEP;AAFqB,SAArB,CAAP;AAIA,OAND,CAME,OAAOQ,KAAP,EAAc;AACf,eAAOV,GAAG,CAACM,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC3BC,UAAAA,OAAO,EAAE;AADkB,SAArB,CAAP;AAGA;;AACF;AACCR,MAAAA,GAAG,CAACa,UAAJ,CAAe,OAAf,EAAwB,CAAC,KAAD,EAAQ,MAAR,CAAxB;AACA,aAAOb,GAAG,CACRM,MADK,CACE,GADF,EAELC,IAFK,CAEA;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAFA,EAGLM,GAHK,CAGA,UAASb,MAAO,cAHhB,CAAP;AA9BF;AAmCA,CAtCD","sourcesContent":["import Employee from \"@/models/Employee\";\nimport \"@/utils/dbConnect\";\n\nexport default async (req, res) => {\n\tconst { method } = req;\n\n\tswitch (method) {\n\t\tcase \"GET\":\n\t\t\ttry {\n\t\t\t\tconst employees = await Employee.find({}).sort({\n\t\t\t\t\tcreatedAt: \"desc\",\n\t\t\t\t});\n\n\t\t\t\treturn res.status(200).json({\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tdata: employees,\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\treturn res.status(400).json({\n\t\t\t\t\tsuccess: false,\n\t\t\t\t});\n\t\t\t}\n\t\tcase \"POST\":\n\t\t\ttry {\n\t\t\t\tconst employees = await Employee.create(req.body);\n\t\t\t\treturn res.status(201).json({\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tdata: employees,\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\treturn res.status(400).json({\n\t\t\t\t\tsuccess: false,\n\t\t\t\t});\n\t\t\t}\n\t\tdefault:\n\t\t\tres.setHeaders(\"Allow\", [\"GET\", \"POST\"]);\n\t\t\treturn res\n\t\t\t\t.status(405)\n\t\t\t\t.json({ success: false })\n\t\t\t\t.end(`Method ${method} Not Allowed`);\n\t}\n};\n"]},"metadata":{},"sourceType":"module"}